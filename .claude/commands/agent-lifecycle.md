---
description: 에이전트 생성, 유지, 종료 규칙.
---

# Agent Lifecycle Rules

## 에이전트 생성 규칙

### 언제 생성하는가?

| 상황 | 에이전트 | 이유 |
|------|---------|------|
| Phase 시작 | 해당 specialist | 독립적인 작업 단위 |
| 병렬 작업 | 여러 specialist | 동시 실행 |
| 버그 수정 | 원인 담당자 | 빠른 대응 |

### 생성 시 필수 정보

```markdown
## 태스크 정보
- Phase: {N}
- 태스크 ID: {TN.X}
- 담당: {specialist-type}

## Git Worktree (Phase 1+)
- 브랜치: phase/{N}-{feature}
- 경로: ../roomy-phase{N}-{feature}

## TDD 요구사항
- 테스트 파일: {테스트 경로}
- 구현 파일: {구현 경로}
- 테스트 명령어: npm run test

## 작업 내용
{상세 작업 지시}

## 완료 조건
- [ ] {조건들}
```

---

## 에이전트 유지 규칙

### 상태 모니터링

| 상태 | 의미 | 행동 |
|------|------|------|
| 🟢 Active | 작업 중 | 대기 |
| 🟡 Waiting | 의존성 대기 | 다른 작업 진행 |
| 🔴 Failed | 실패 | 재시도 또는 보고 |
| ✅ Done | 완료 | 결과 수집 |

### 타임아웃 처리

- 기본 타임아웃: 10분
- 타임아웃 시: 상태 확인 후 재시도 또는 사용자 보고

---

## 에이전트 종료 규칙

### 정상 종료

1. 모든 테스트 통과 확인
2. 완료 보고 제출
3. Worktree 정리 (Phase 1+)
4. 리소스 해제

### 비정상 종료

1. 에러 로그 수집
2. 부분 진행 상황 저장
3. 사용자에게 보고
4. 복구 방안 제시

---

## 에이전트 간 통신

### Handoff 규칙

```markdown
## 🔄 Handoff: {Source} → {Target}

### 컨텍스트
- Phase: {N}
- 태스크: {TN.X}

### 전달 내용
{필요한 정보}

### 기대 행동
{Target이 해야 할 일}
```

### 버그 리포트

```markdown
## 🐛 Bug Report: {Source} → {Target}

### 문제
{에러 설명}

### 재현 방법
{단계별 설명}

### 기대 수정
{수정 방향}
```

---

## 품질 게이트

### Phase 완료 전 필수 체크

- [ ] 모든 테스트 통과
- [ ] 빌드 성공
- [ ] 타입 에러 없음
- [ ] 커버리지 >= 80%

### 병합 전 필수 체크

- [ ] 위 모든 항목 통과
- [ ] 사용자 승인 획득
- [ ] 충돌 없음
